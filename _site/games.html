<!DOCTYPE html>
<html lang=" en-US">

<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,maximum-scale=2">
  <link rel="icon" href="./assets/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" type="text/css" media="screen"
    href="/assets/css/style.css?v=05dc45eabd285aa91325f2e5f22dd5e7457969cf">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Our Games | WNL Gamers</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Our Games" />
<meta name="author" content="WNL Gamers" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Board games in Wootton, Bedford" />
<meta property="og:description" content="Board games in Wootton, Bedford" />
<link rel="canonical" href="http://localhost:4000/games.html" />
<meta property="og:url" content="http://localhost:4000/games.html" />
<meta property="og:site_name" content="WNL Gamers" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Our Games" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"WNL Gamers"},"description":"Board games in Wootton, Bedford","headline":"Our Games","url":"http://localhost:4000/games.html"}</script>
<!-- End Jekyll SEO tag -->

  <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  <!-- _includes/nav.html -->
<nav class="site-nav">
  <ul>
    
    
      <li>
        <a href="/">Home</a>
      </li>
    
      <li>
        <a href="/hosts.html">Hosts & Games</a>
      </li>
    
      <li>
        <a href="/about.html">About</a>
      </li>
    
      <li>
        <a href="/contact.html">Contact</a>
      </li>
    
  </ul>
</nav>

</head>

<body>

  <!-- HEADER -->
  <div id="header_wrap" class="outer">
    <header class="inner">
      <div class="site-branding">
        <h1 id="project_title">WNL Gamers</h1>
        <p id="project_tagline">Board games in Wootton, Bedford</p>
      </div>
    </header>
  </div>

  <!-- MAIN CONTENT -->
  <div id="main_content_wrap" class="outer">
    <section id="main_content" class="inner">
      <h2 id="our-game-list">Our Game List</h2>

<p>Below are a few of the games we play:</p>

<div id="geeklistContainer">
  <p>Loading geeklist...</p>
</div>

<script>
  // Function to convert BBCode to HTML for basic tags
function convertBBCodeToHTML(bggText) {
  // Convert bold tags
  bggText = bggText.replace(/\[b\]/gi, "<strong>")
                   .replace(/\[\/b\]/gi, "</strong>");
  
  // Convert URL tags to links
  bggText = bggText.replace(/\[url=(.*?)\](.*?)\[\/url\]/gi, '<a href="$1" target="_blank">$2</a>');

  // Insert a line break before the ‚ôüÔ∏è and üéûÔ∏è characters
  bggText = bggText.replace(/(‚ôüÔ∏è)/g, '<br>$1')
                   .replace(/(üéûÔ∏è)/g, '<br>$1');

  // Insert line breaks before labels for Players, Complexity, and Play Time
  bggText = bggText.replace(/(\<strong\>Players:)/gi, '<br>$1')
                   .replace(/(\<strong\>Complexity:)/gi, '<br>$1')
                   .replace(/(\<strong\>Play Time:)/gi, '<br>$1');

  // If the original text doesn't have line breaks where needed, you can also
  // try inserting a break at other predictable points.

  return bggText;
}

  // Function to fetch the thumbnail for a given game using the BoardGameGeek "thing" endpoint
  async function fetchThumbnail(objectid, imageId) {
    const thingURL = "https://boardgamegeek.com/xmlapi2/thing?id=" + objectid;
    try {
      const response = await fetch(thingURL);
      const xmlText = await response.text();
      const parser = new DOMParser();
      const xmlDoc = parser.parseFromString(xmlText, "application/xml");
      const thumbnailElement = xmlDoc.querySelector("thumbnail");
      if (thumbnailElement) {
        const thumbUrl = thumbnailElement.textContent;
        document.getElementById(imageId).src = thumbUrl;
      } else {
        console.error("No thumbnail found for objectid: " + objectid);
      }
    } catch (error) {
      console.error("Error fetching thumbnail for objectid " + objectid + ":", error);
    }
  }

  // Main function: fetch and render geeklist items, then load thumbnails for each item
  document.addEventListener("DOMContentLoaded", async function() {
    const geeklistURL = "https://boardgamegeek.com/xmlapi/geeklist/355850";
    try {
      const response = await fetch(geeklistURL);
      if (!response.ok) {
        throw new Error("Network response was not ok");
      }
      const xmlText = await response.text();
      const parser = new DOMParser();
      const xmlDoc = parser.parseFromString(xmlText, "application/xml");
      const items = xmlDoc.getElementsByTagName("item");
      let output = "";

      // Loop through each geeklist item
      Array.from(items).forEach(function(item) {
        // Get the game title from the "objectname" attribute
        const objectid = item.getAttribute("objectid");
        const objectname = item.getAttribute("objectname") || "Untitled";
        // Build a link to the game's BoardGameGeek page using the objectid
        const bggLink = `https://boardgamegeek.com/boardgame/${objectid}`;

        // Get the body text (which contains BBCode) and convert it to HTML
        const bodyElem = item.querySelector("body");
        let bodyText = bodyElem ? bodyElem.textContent : "";
        bodyText = convertBBCodeToHTML(bodyText);

        // Create a unique ID for the image element for this game
        const imageId = "thumbnail-" + objectid;

        // Build the HTML for this geeklist item
        output += `
          <div class="geeklist-item" style="border-bottom:1px solid #ccc; padding:1rem 0; margin-bottom:1rem;">
            <div class="geeklist-thumbnail" style="margin-bottom: 0.5rem;">
              <!-- Thumbnail image. The src is empty initially, to be filled in asynchronously -->
              <img id="${imageId}" src="" alt="Thumbnail for ${objectname}" style="max-width:150px;">
            </div>
             <div class="geeklist-info">
            <h3>
              <a href="${bggLink}" target="_blank">${objectname}</a>
            </h3>

            <div class="geeklist-description">
              ${bodyText}
            </div>
            </div>
          </div>
        `;
      });

// Append the footer link to the output
output += `
  <div class="geeklist-footer" style="text-align: center; margin-top: 1rem;">
    <a href="https://boardgamegeek.com/geeklist/355850" target="_blank">View Full Geeklist on BoardGameGeek</a>
  </div>
`;

// Then update the container HTML
document.getElementById("geeklistContainer").innerHTML = output;

      // Now, loop through the items again to fetch and set each thumbnail image
      Array.from(items).forEach(function(item) {
        const objectid = item.getAttribute("objectid");
        const imageId = "thumbnail-" + objectid;
        fetchThumbnail(objectid, imageId);
      });

    } catch (error) {
      console.error("Error loading Geeklist:", error);
      document.getElementById("geeklistContainer").innerHTML =
        "<p>Error loading Geeklist data.</p>";
    }
  });
</script>


    </section>
  </div>

  <!-- FOOTER -->
  <div id="footer_wrap" class="outer">
    <footer class="inner">
      <p class="footer-links">
        
        WNL Gamers maintained by <a href="https://github.com/wnlgamers">wnlgamers</a>
        &nbsp;|&nbsp;
        
        <a href="mailto:info@wnlgamers.uk">info@wnlgamers.uk</a>
        &nbsp;|&nbsp;
        <a href="https://github.com/wnlgamers/website" target="_blank" rel="noopener">GitHub</a>
      </p>
    </footer>
  </div>

</body>

</html>